<!doctype html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0 minimal-ui" />
    <title>Zalando Tech</title>
    <meta name="description" content="This is the home of Zalando Tech. We dress code! Check out our job page for available positions.">
    <link href="../../../images/zalando.ico" rel="icon" type="image/x-icon" />
    <link rel="stylesheet" href="../../../css/tech.zalando-all.css" />
</head>
<body>

    {% include "../src/partials/header.html" %}

    {%- for result in prismic.blogpost.results %}{# Hack to assign ...results[0] to a named var #}

    <!--

        Blog Picture

    -->

    <div class="fullsize-media">
        <div class="blog-post-picture">
            <div class="wrapper" id="scene">
                <div class="inner layer" data-depth="0.20" style="background-image:url('{{ result.data.image.json.main.url }}')"></div>
            </div>
        </div>
        <div class="blog-post-header">
            <div class="container">
                <div class="row">
                    <div class="col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2">
                        <h1 class="title">{{ result.data.title.json.blocks[0].text }}</h1>
                        <p class="subtitle">by 
                            {%- for post_author in result.data.authors.json.value %}
                                {# author.fragments.link.value.document.id #}
                                {%- for author in prismic.authors.results %}
                                    {%- if post_author.fragments.link.value.document.id == author.id %}
                                        {{ author.data.full_name.json.blocks[0].text }}
                                    {%- endif %}
                                {%- endfor %}
                            {%- endfor %}
                             - {{ result.data.date.json.value|date('F Y') }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--

        Post Content

    -->

    <div class="fullsize-container white">
        <div class="container">
            <div class="row">
                <div class="col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2">
                    <div class="blog-post-content">
                        {{ result.data.body.html|
                                safe|
                                replace('``([^`]*)``', '<code>$1</code>', 'g')|
                                replace('<p>.. code:: (.*?)</p><p>(.*?)</p>', '<pre><code data-lang="$1">$2</code></pre>', 'g') }}
                        {%- for post_author in result.data.authors.json.value %}
                            {# author.fragments.link.value.document.id #}
                            {%- for author in prismic.authors.results %}
                                {%- if post_author.fragments.link.value.document.id == author.id %}
                                    <div class="author">
                                        <!-- {{ result.data.image.json|json }} -->
                                        <div class="picture" style="background-image:url('{{ author.data.image.json.main.url }}');"></div>
                                        <p>{{ author.data.full_name.json.blocks[0].text }}</p>
                                        <p class="title">{{ author.data.title.json.value }}</p>
                                    </div>
                                {%- endif %}
                            {%- endfor %}
                        {%- endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    {%- endfor %}

    <!--

        Footer

    -->

    {% include "../src/partials/footer.html" %}

    <script async src="../../../js/tech.zalando-all.js"></script>

</body>
</html>
